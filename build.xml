<project name="com.darwinsys.* package" default="regress" basedir=".">

	<!-- $Id$ -->

	<!-- dependancies -->
	<property file="../build.properties"/>

	<!-- other properties -->
	<property name="src" value="src"/>
	<property name="build" value="build"/>

	<property name="obj.jar" value="com-darwinsys-all.jar"/>
	<property name="src.jar" value="com-darwinsys-all-src.jar"/>

	<property name="deploy.dir" value="${user.home}/classes/ext"/>

	<target name="init">
		<tstamp/> <!-- Set time stamp variables in case we need 'em-->
		<mkdir dir="${build}"/> <!-- Ensure build directory exists -->
	</target>

	<target name="build" depends="init">
		<javac srcdir="${src}" destdir="${build}"
			classpath="${servletapi.jar}:${mail.jar}:${activation.jar}"
			/>
	</target>

	<target name="jar" depends="docs">
		<jar jarfile="${build}/${obj.jar}" 
			manifest="manifest.stub"
			basedir="${build}" includes="META-INF/*,com/**/*.class,docs">
		</jar>
	</target>

	<target name="src-jar" depends="docs">
		<jar jarfile="${build}/${src.jar}"
			manifest="manifest.stub"
			basedir="." includes="build.xml,src/**">
		</jar>
	</target>

	<target name="dist" depends="jar,src-jar"/>

	<target name="deploy" depends="jar">
		<copy file="${build}/${obj.jar}" todir="${deploy.dir}"/>
	</target>

	<target name="docs" depends="build">
		<javadoc sourcepath="${src}" destdir="docs/api"
			packagenames="com.darwinsys.*"
			maxmemory="32m" 
			windowtitle="com.darwinsys.* - Java Cookbook Utilities"
			Version="true" Author="true" Use="true"
			Overview="overview.html"
			>
			<packageset dir="${src}" defaultexcludes="yes">
				<include name="com/darwinsys/**" />
				<exclude name="regress/**"/>
			</packageset>
			<bottom><![CDATA[<i>Copyright &#169; 2000-2003 Ian F. Darwin. See <a href="http://javacook.darwinsys.com/license.html">license.html</a> for usage license.</i>]]></bottom>
		</javadoc>
	</target>

	<target name="regress" depends="jar">
		<java className="regress.GetOptTest"
			classpath="build:${servletapi.jar}:${mail.jar}:${activation.jar}"/>
	</target>

	<target name="clean">
		<delete dir="build"/>
		<delete dir="docs"/>
	</target>
</project>
